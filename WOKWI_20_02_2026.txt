link wokwi -> https://wokwi.com/projects/456521234904882177
código abaixo:
#include <Arduino.h>

static const int LED_PIN = 2;
bool led = false;
unsigned long last = 0;
unsigned long lastPrint = 0;

// Tarefa 1 - Piscar um LED
void blink_led() {
  unsigned long now = millis();
  unsigned long diff = now - last; 

  if(diff >= 500){
    if(led == false){
    digitalWrite(LED_PIN, led);
    led = true;
    }
    else{
      digitalWrite(LED_PIN, led);
      led = false;
    }
    last = now;
    Serial.printf("[millis] período = %lu ms\n", diff);
  }
}

// Tarefa 2 - Processa Alguma Coisa
void process_anything(){
  unsigned long temp0 = micros();
  for(volatile long i=0; i < 500; i++){}
  unsigned long temp1 = micros() - temp0;
  if(millis() - lastPrint >= 2000){
    Serial.printf("[micros] período = %lu us\n", temp1);
    lastPrint = millis();
  }
}

void setup() {
  // put your setup code here, to run once:
  Serial.begin(115200);
  Serial.println("Hello, ESP32!");
  pinMode(LED_PIN, OUTPUT);
}

void loop() {
  // put your main code here, to run repeatedly:
  //delay(10); // this speeds up the simulation
  blink_led();
  process_anything();
}
